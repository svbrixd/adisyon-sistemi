const { MongoClient } = require("mongodb");\n\nconst uri = process.env.MONGODB_URI;\n\nmodule.exports = async function handler(req, res) {\n  if (!uri) {\n    res.status(500).json({ error: "MONGODB_URI tanımlı değil" });\n    return;\n  }\n  const client = new MongoClient(uri);\n  await client.connect();\n  const db = client.db();\n  const collection = db.collection("users");\n\n  if (req.method === "GET") {\n    const users = await collection.find({}).toArray();\n    res.status(200).json({ users });\n  } else if (req.method === "POST") {\n    const { username, password, role, displayName } = req.body || {};\n    if (!username || !password || !role) {\n      res.status(400).json({ error: "Eksik bilgi" });\n      return;\n    }\n    await collection.insertOne({ username, password, role, displayName });\n    res.status(201).json({ success: true });\n  } else {\n    res.status(405).json({ error: "Method not allowed" });\n  }\n  await client.close();\n};\n 